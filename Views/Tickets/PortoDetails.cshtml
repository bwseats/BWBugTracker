@model BWBugTracker.Models.Ticket

@inject BWBugTracker.Services.Interfaces.IBTTicketService _btTicketService

<div class="page-header">
    <h2>Tickets</h2>
</div>
<form class="order-details action-buttons-fixed" method="post">
    <div class="row">
        <div class="col-xl-4 mb-4 mb-xl-0">
            <div>
                <h1 class="text-dark">@Model.Title</h1>
            </div>
            <div class="card card-modern">
                <div class="card-header">
                    <h2 class="card-title">Ticket Details</h2>
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group col mb-3">

                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-xl-8">

            <div class="card card-modern">
                <div class="card-header">
                    <h2 class="card-title">Description</h2>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-xl-auto me-xl-5 pe-xl-5 mb-4 mb-xl-0">
                            <p>@Model.Description</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="row">
        <div class="col">

            <div class="card card-modern">
                <div class="card-header">
                    <h2 class="card-title">Order Notes</h2>
                </div>
                <div class="card-body">
                    <div class="ecommerce-timeline mb-3">
                        <div class="ecommerce-timeline-items-wrapper">
                            <div class="ecommerce-timeline-item">
                                <small>added on June 26, 2020 at 4:01 pm by admin - <a href="#" class="text-color-danger">Delete note</a></small>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas hendrerit augue at leo viverra, aliquam egestas lectus laoreet. Donec vehicula vestibulum ipsum, tincidunt ultrices elit suscipit ac. Sed eget risus laoreet, varius nibh id, luctus ligula. Nulla facilisi</p>
                            </div>
                            <div class="ecommerce-timeline-item">
                                <small>added on June 26, 2020 at 4:01 pm by admin - <a href="#" class="text-color-danger">Delete note</a></small>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas hendrerit augue at leo viverra, aliquam egestas lectus laoreet. Donec vehicula vestibulum ipsum, tincidunt ultrices elit suscipit ac. Sed eget risus laoreet, varius nibh id, luctus ligula. Nulla facilisi</p>
                            </div>
                            <div class="ecommerce-timeline-item">
                                <small>added on June 26, 2020 at 4:01 pm by admin - <a href="#" class="text-color-danger">Delete note</a></small>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas hendrerit augue at leo viverra, aliquam egestas lectus laoreet. Donec vehicula vestibulum ipsum, tincidunt ultrices elit suscipit ac. Sed eget risus laoreet, varius nibh id, luctus ligula. Nulla facilisi</p>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col pb-1 mb-3">
                            <label>Add Note</label>
                            <textarea class="form-control form-control-modern" name="orderAddNote" rows="6"></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col">
                            <a href="#" class="cancel-button btn btn-light btn-px-4 py-3 border font-weight-semibold text-color-dark text-3">Add Note</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-8 col col-cols-2 mt-5 ">
                    <div class="col">
                        <div class="bg-secondary">
                            <div class="card m-1 p-2">
                                <div class="card-header">
                                    <h2>Comments</h2>
                                </div>
                                <div class="card-body" style="overflow-y:auto;height:600px;">
                                    <form asp-controller="Tickets" asp-action="AddTicketComment" method="post">
                                        <input type="hidden" asp-for="Id" name="TicketId" />
                                        <div class="row row--10">
                                            @if (User.Identity!.IsAuthenticated)
                                            {
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label for="message">Leave a Comment</label>
                                                        <textarea id="Body" name="Body"></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-submit cerchio">
                                                        <input type="submit" class="axil-button button-rounded" value="Post Comment">
                                                    </div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="col-lg-12">
                                                    <div class="form-submit cerchio">
                                                        <a href="/Identity/Account/Login" class="axil-button button-rounded">Login to Post Comment</a>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </form>
                                    <hr />
                                    <h6>Comments</h6>
                                    <ul class="right_chat list-unstyled mb-0">
                                        @*@foreach (TicketComment ticketComment in Model.Comments)
                                        {
                                            <!-- Start Single Comment  -->
                                            <li class="comment">
                                                <div class="comment-body">
                                                    <div class="single-comment">
                                                        <div class="comment-img">
                                                            <img class="comment-author-img" src="~/img/DefaultUserImage.jpg" alt="Author Images" />
                                                        </div>
                                                        <div class="comment-inner">
                                                            <h6 class="commenter">
                                                                <a class="hover-flip-item-wrapper" asp-controller="Home" asp-action="Index">
                                                                    <span class="hover-flip-item">
                                                                        <span data-text="@ticketComment.BTUser!.FullName">
                                                                            @ticketComment.BTUser!.FullName
                                                                        </span>
                                                                    </span>
                                                                </a>
                                                            </h6>
                                                            <div class="comment-meta">
                                                                <div class="time-spent">@ticketComment.Created</div>
                                                            </div>
                                                            <div class="comment-text">
                                                                <p class="b2">
                                                                    @ticketComment.Comment
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <!-- End Single Comment  -->
                                        }*@
                                    </ul>
                                </div>
                                <div class="card-footer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="bg-secondary">
                            <div class="card m-1 p-2">
                                <div class="card-header">
                                    <h2>Attachments</h2>
                                </div>
                                <div class="card-body" style="overflow-y:auto;height:300px;">

                                    @* Refer to the Ticket Attachments document for this section *@

                                    @* Ticket attachments part 1 here *@


                                    @* Ticket attachments part 2 here *@

                                </div>
                                <div class="card-footer">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="row action-buttons">
        <div class="col-12 col-md-auto">
            <button type="submit" class="submit-button btn btn-primary btn-px-4 py-3 d-flex align-items-center font-weight-semibold line-height-1" data-loading-text="Loading...">
                <i class="bx bx-save text-4 me-2"></i> Save Order
            </button>
        </div>
        <div class="col-12 col-md-auto px-md-0 mt-3 mt-md-0">
            <a href="ecommerce-orders-list.html" class="cancel-button btn btn-light btn-px-4 py-3 border font-weight-semibold text-color-dark text-3">Cancel</a>
        </div>
        <div class="col-12 col-md-auto ms-md-auto mt-3 mt-md-0 ms-auto">
            <a href="#" class="delete-button btn btn-danger btn-px-4 py-3 d-flex align-items-center font-weight-semibold line-height-1">
                <i class="bx bx-trash text-4 me-2"></i> Delete Order
            </a>
        </div>
    </div>
</form>